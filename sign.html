<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign the T-Shirt Guestbook</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <h1>Sign In!</h1>
  <p>You're part of the shirt's journey now. Leave your mark:</p>

  <form 
  name="guestbook" method="POST" data-netlify="true" netlify-honeypot="bot-field">
    <!-- Honeypot for spam -->
    <input type="hidden" name="form-name" value="guestbook" />
    <p hidden><label>Donâ€™t fill this: <input name="bot-field"></label></p>

    <label>Your Name
      <input type="text" name="name" required placeholder="Alex" />
    </label>

    <label>Location (city, country, or just country)
      <input type="text" name="location" required placeholder="Berlin, Germany" />
    </label>

    <label>Optional Message / How you found the shirt
      <textarea name="message" rows="4" placeholder="Saw it at the conference!"></textarea>
    </label>

    <button type="submit">Sign & See the Board</button>
  </form>

  <!-- Optional: success message (Netlify redirects here after submit) -->
  <!-- Or set form action="/thank-you.html" later -->
<script>
  const form = document.querySelector('form[name="guestbook"]');
  const formContainer = form.parentElement; // or document.querySelector('.form-wrapper') if you wrap it

  form.addEventListener('submit', function(e) {
    e.preventDefault();

    const formData = new FormData(form);
    const urlEncodedData = new URLSearchParams(formData).toString();

    fetch('/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: urlEncodedData
    })
    .then(response => {
      if (!response.ok) throw new Error('Submission failed');
      return response;
    })
    .then(() => {
      // Success: Replace form with thank-you + link to board
      formContainer.innerHTML = `
        <div class="success" style="text-align: center; padding: 50px 20px; background: #e8f5e9; border-radius: 12px;">
          <h1>Thank you! ðŸŽ‰ You've signed the guestbook</h1>
          <p>Your name and location are now part of the shirt's story.</p>
          
          <div style="margin: 40px 0;">
            <a href="board.html">
              <button style="font-size: 1.3em; padding: 18px 40px; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer;">
                See the Board â†’ Who's signed so far?
              </button>
            </a>
          </div>
          
          <p>
            <a href="sign.html">Sign again</a> | <a href="index.html">Home</a>
          </p>
        </div>
      `;
      
      // Optional: Scroll to top of success message
      window.scrollTo({ top: 0, behavior: 'smooth' });
    })
    .catch(error => {
      console.error('Error:', error);
      formContainer.innerHTML += `
        <div style="color: red; text-align: center; margin-top: 20px;">
          Oops! Something went wrong. Please try again or refresh.
        </div>
      `;
    });
  });
</script>
</body>
</html>